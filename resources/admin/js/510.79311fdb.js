"use strict";(self["webpackChunkhalo_admin"]=self["webpackChunkhalo_admin"]||[]).push([[510],{85510:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",[e("a-row",{attrs:{gutter:12}},[e("a-col",{staticClass:"mb-3",attrs:{lg:12,md:24,sm:24,xl:12,xs:24}},[e("a-card",{attrs:{bodyStyle:{padding:0},bordered:!1,hoverable:"",title:"服务器"}},[e("table",{staticClass:"w-full"},[e("tbody",{staticClass:"ant-table-tbody"},[e("tr",[e("td",[t._v("系统")]),e("td",[t._v(t._s(t.systemProperties["os.name"].value)+" "+t._s(t.systemProperties["os.version"].value))])]),e("tr",[e("td",[t._v("平台")]),e("td",[t._v(t._s(t.systemProperties["os.arch"].value))])]),e("tr",[e("td",[t._v("语言")]),e("td",[t._v(t._s(t.systemProperties["user.language"].value))])]),e("tr",[e("td",[t._v("时区")]),e("td",[t._v(t._s(t.systemProperties["user.timezone"].value))])]),e("tr",[e("td",[t._v("当前用户")]),e("td",[t._v(t._s(t.systemProperties["user.name"].value))])]),e("tr",[e("td",[t._v("用户目录")]),e("td",[t._v(t._s(t.systemProperties["user.home"].value))])])])])]),e("a-divider",{attrs:{dashed:""}})],1),e("a-col",{staticClass:"mb-3",attrs:{lg:12,md:24,sm:24,xl:12,xs:24}},[e("a-card",{attrs:{bodyStyle:{padding:0},bordered:!1,hoverable:"",title:"使用情况"}},[e("table",{staticClass:"w-full"},[e("tbody",{staticClass:"ant-table-tbody"},[e("tr",[e("td",[t._v("CPU 核心数")]),e("td",[t._v(t._s(t.system.cpu.count)+" 个")])]),e("tr",[e("td",[t._v("CPU 使用率")]),e("td",[t._v(t._s(t.system.cpu.usage)+" %")])]),e("tr",[e("td",[t._v("JVM 最大可用内存")]),e("td",[t._v(t._s(t._f("fileSizeFormat")(t.jvm.memory.max)))])]),e("tr",[e("td",[t._v("JVM 可用内存")]),e("td",[t._v(t._s(t._f("fileSizeFormat")(t.jvm.memory.committed)))])]),e("tr",[e("td",[t._v("JVM 已用内存")]),e("td",[t._v(t._s(t._f("fileSizeFormat")(t.jvm.memory.used)))])]),e("tr",[e("td",[t._v("GC 次数")]),e("td",[t._v(t._s(t.jvm.gc.pause.count)+" 次")])])])])]),e("a-divider",{attrs:{dashed:""}})],1),e("a-col",{staticClass:"mb-3",attrs:{lg:24,md:24,sm:24,xl:24,xs:24}},[e("a-card",{attrs:{bodyStyle:{padding:0},bordered:!1,hoverable:"",title:"环境"}},[e("table",{staticClass:"w-full"},[e("tbody",{staticClass:"ant-table-tbody"},[e("tr",[e("td",[t._v("Java 名称")]),e("td",[t._v(t._s(t.systemProperties["java.vm.name"].value))])]),e("tr",[e("td",[t._v("Java 版本")]),e("td",[t._v(t._s(t.systemProperties["java.version"].value))])]),e("tr",[e("td",[t._v("Java Home")]),e("td",[e("ellipsis",{attrs:{length:t.isMobile()?50:256,tooltip:""}},[t._v(" "+t._s(t.systemProperties["java.home"].value)+" ")])],1)])])])]),e("a-divider",{attrs:{dashed:""}})],1),e("a-col",{staticClass:"mb-3",attrs:{lg:24,md:24,sm:24,xl:24,xs:24}},[e("a-card",{attrs:{bodyStyle:{padding:0},bordered:!1,hoverable:"",title:"应用"}},[e("table",{staticClass:"w-full"},[e("tbody",{staticClass:"ant-table-tbody"},[e("tr",[e("td",[t._v("端口")]),e("td",[t._v(t._s(t.propertiesSourcesMap["server.ports"]["local.server.port"].value))])]),e("tr",[e("td",[t._v("PID")]),e("td",[t._v(t._s(t.systemProperties["PID"].value))])]),e("tr",[e("td",[t._v("启动时间")]),e("td",[t._v(t._s(t._f("moment")(t.system.process.startTime)))])]),e("tr",[e("td",[t._v("已启动时间")]),e("td",[t._v(t._s(t._f("dayTime")(t.system.process.uptime)))])]),e("tr",[e("td",[t._v("启动目录")]),e("td",[e("ellipsis",{attrs:{length:t.isMobile()?50:256,tooltip:""}},[t._v(" "+t._s(t.systemProperties["user.dir"].value)+" ")])],1)]),e("tr",[e("td",[t._v("日志目录")]),e("td",[e("ellipsis",{attrs:{length:t.isMobile()?50:256,tooltip:""}},[t._v(" "+t._s(t.systemProperties["LOG_FILE"].value)+" ")])],1)])])])])],1)],1),e("div",{staticStyle:{position:"fixed",bottom:"30px",right:"30px"}},[e("a-button",{attrs:{icon:"sync",shape:"circle",size:"large",type:"primary"},on:{click:t.handleRefresh}})],1)],1)},r=[],o=s(83428),m=s(80068),i={name:"Environment",mixins:[o.jB,o.KT],data(){return{propertiesSourcesMap:{},systemProperties:[],interval:null,system:{cpu:{count:0,usage:0},process:{cpuUsage:0,uptime:0,startTime:0}},jvm:{memory:{max:0,committed:0,used:0},gc:{pause:{count:0}}}}},created(){this.loadEnv(),this.loadSystemInfo(),this.loadJvmInfo()},methods:{loadEnv(){m.Z.actuator.getEnv().then((t=>{const e=t.propertySources;e.forEach((t=>{this.propertiesSourcesMap[t.name]=t.properties})),this.systemProperties=this.propertiesSourcesMap["systemProperties"]}))},loadSystemInfo(){m.Z.actuator.getSystemCpuCount().then((t=>{this.system.cpu.count=t.measurements[0].value})),m.Z.actuator.getSystemCpuUsage().then((t=>{this.system.cpu.usage=Number(100*t.measurements[0].value).toFixed(2)})),m.Z.actuator.getProcessUptime().then((t=>{this.system.process.uptime=t.measurements[0].value})),m.Z.actuator.getProcessStartTime().then((t=>{this.system.process.startTime=1e3*t.measurements[0].value})),m.Z.actuator.getProcessCpuUsage().then((t=>{this.system.process.cpuUsage=t.measurements[0].value}))},loadJvmInfo(){m.Z.actuator.getJvmMemoryMax().then((t=>{this.jvm.memory.max=t.measurements[0].value})),m.Z.actuator.getJvmMemoryCommitted().then((t=>{this.jvm.memory.committed=t.measurements[0].value})),m.Z.actuator.getJvmMemoryUsed().then((t=>{this.jvm.memory.used=t.measurements[0].value})),m.Z.actuator.getJvmGcPause().then((t=>{this.jvm.gc.pause.count=t.measurements[0].value}))},handleRefresh(){this.loadSystemInfo(),this.loadJvmInfo()}}},l=i,d=s(1001),v=(0,d.Z)(l,a,r,!1,null,null,null),u=v.exports}}]);